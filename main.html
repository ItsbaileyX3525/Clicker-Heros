<!DOCTYPE html>
<html>
<style>
body{
    background-image:url('assets/bg.webp');
}
</style>
<body>
    <div id='Smooth' style="z-index: -123;position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;background-color: black; opacity: 1;"></div>
    <script src="Smooth.js"></script>
    <script>
const woosh = {
  woosh1: new Audio('assets/woosh1.ogg'),
  woosh2: new Audio('assets/woosh2.ogg'),
  woosh3: new Audio('assets/woosh3.ogg'),
};

const wooshArray = Object.values(woosh);

function getRandomWoosh() {
  const randomIndex = Math.floor(Math.random() * wooshArray.length);
  const current = wooshArray[randomIndex]
  if (current.paused) {
    return current;
  }
  
}

const songs = {
  song1: new Audio('assets/bgsong.ogg')
}

const songArray = Object.values(songs);

function getRandomSong() {
  const randomIndex = Math.floor(Math.random() * songArray.length);
  const current = songArray[randomIndex]
  if (current.paused) {
    return current;
  }
  
}

StartedSong = getRandomSong()
StartedSong.play()
window.addEventListener('click', (event) => {
  if (StartedSong.paused) {
    ;
    //StartedSong.play();
    //alert("Why was the audio paused?")
  }
})
function setVolumeForAudioArrays(audioArrays, volume) {
    audioArrays.forEach(audioArray => {
        audioArray.forEach(element => {
            element.volume = volume;
        });
    });
}

    </script>

    <script src="taptapir/taptapir.js"></script>
<script type="text/sunsnake">

#Global Functions
set_orientation('horizontal')
set_window_color('transparent')
set_background_color('black')
ASSETS_FOLDER = 'assets/'

#For settings
save_system_save('prevtab', "main")

#Loading score and data etc.
score = int(save_system_load('score'))
if not score:
    score = 0

ClickerDude = Button(texture='Clicker-idle.gif',scale=[.15,.15],y=.33)
ClickerDude.on_click = def():
    score += 1
    getRandomWoosh().play()
    ClickerDude.texture = 'Clicker-attack.gif'
    after .5:
        ClickerDude.texture = 'Clicker-idle.gif'

score_display = Text(text=`Clicks: ${score}`,x=.3)
score_display.update = def():
    score_display.text = `Clicks: ${score}`

settingsButton = Button(texture='settingsCog.webp',scale=.1,x=.8,y=.45)
settingsButton.on_click = def():
    SmoothTransit("Settings")

volume = int(save_system_load('mastervolume'))
setVolumeForAudioArrays([wooshArray, songArray], volume);

#General updating stuff
def update():
    save_system_save('score', score)
    











_hidden_fullscreen_button.xy = [213213213,123123123]
</script>
<script src="taptapir/sunsnake_compiler.js"></script>
</body>
</html>