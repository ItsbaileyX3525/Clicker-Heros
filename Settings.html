<!DOCTYPE html>
<html>
<style>
body{
    background-color:black;
}
</style>
<body>
    <div id='Smooth' style="z-index: 0;position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;background-color: black; opacity: 1;"></div>
    <script src="Smooth.js"></script>
    
    <script>


music = new Audio('assets/settingsbgsong.ogg')

music.play();

function setVolumeForAudioArray(volumee) {
    var vol = volumee/100
    music.volume = parseFloat(vol);
}

function eggs() {
    let person = prompt("What tab did you come from", "(main)/(menu)");
    person = person.toUpperCase();
    console.log(person);
    let text;
    if (person == null || person == "") {
        text = "User cancelled the prompt.";
        } else {
        if (person == "MENU")
        {
            PrevTab = 'menu'
            window.localStorage.setItem('prevtab', '"menu"')
        } else {
            window.localStorage.setItem('prevtab', '"main"')
            PrevTab = 'main'
        }
        }
}

    </script>
    <script src="taptapir/taptapir.js"></script><script>
class Slider extends Entity{
    constructor({scale=[.4,.03],value=10,x=0,y=0}) {
        super(function update(){});
        this.alpha = 0;
        this.sliderBackground = new Entity({scale:[scale[0]+scale[1],scale[1]],x:x,y:y,roundness:0.5});
        this.sliderVal = new Entity({scale:[scale[0],0],x:x,y:y})
        this.sliderButton = new Button({scale:[scale[1],scale[1]],x:x,y:y,roundness:0.5,color:color.blue,draggable:true,lock_y:true});
        this.value = value;
        this.sliderButton.x = (this.sliderButton.x = this.value * this.sliderVal.scale_x / 100 - this.sliderVal.scale_x / 2);
        }
    update = function() {
        if (this.sliderButton.x <= (-this.sliderVal.scale_x/2+0)) {
            this.sliderButton.x = -this.sliderVal.scale_x/2+0;
        }
        if (this.sliderButton.x >= (this.sliderVal.scale_x/2-0)) {
            this.sliderButton.x = this.sliderVal.scale_x/2-0;
        }
        this.value = round((this.sliderButton.x + this.sliderVal.scale_x/2) * 100 / this.sliderVal.scale_x, 0);
    }
    setValue = function(value) {
        console.log(value)
        this.sliderButton.x = (this.sliderButton.x = value * this.sliderVal.scale_x / 100 - this.sliderVal.scale_x / 2);
    }
}</script>
<script type="text/sunsnake">

#Global Functions
set_orientation('horizontal')
set_window_color('rgb(57, 66, 92)')
set_background_color('black')
ASSETS_FOLDER = 'assets/'


volume = round(parseFloat(save_system_load('mastervolume')), 10)
volume = volume * 100
PrevTab = save_system_load('prevtab')
if not PrevTab:
    eggs()


GoBackButton = Button(texture='LeftArrow.webp',y=.425,x=-.8,scale=[.1,.1])
GoBackButton.on_click = def():
    if PrevTab == 'menu':
        SmoothTransit('Menu')
    elif PrevTab == 'main':
        SmoothTransit('main')

masterVolume = new Slider({y:.3})

masterVolume.sliderButton.x = (masterVolume.sliderVal.scale_x/2-0)
masterVolumeVolume = Text(text='',x=.365,y=-.1)
masterVolumeVolume.update = def():
    masterVolumeVolume.text = masterVolume.value

masterVolumeText = Text(text='Master volume: ',x=-.2,y=-.16)
masterVolume.setValue(volume)

Credits = Button(text='Credits',y=-.4,x=.5,scale=[.2,.1],color=color.gray,text_color=color.white)
Credits.on_click = def():
    SmoothTransit('Credits')

#Because Rangers thing sucks
entityUpdater = Entity(alpha=0)
entityUpdater.update = def():
    save_system_save("mastervolume", masterVolume.value/100)
    setVolumeForAudioArray(masterVolume.value);



_hidden_fullscreen_button.xy = [213213213,123123123]
</script>
<script src="taptapir/sunsnake_compiler.js"></script>
</body>
</html>